{%load static%}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - TV Shop Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      body {
        background-color: #f8f9fa;
        font-family: "Segoe UI", sans-serif;
        overflow-x: hidden;
      }

      /* --- MAIN CONTENT & HEADER --- */
      .main-content {
        margin-left: 250px;
        transition: all 0.3s;
      }

      /* --- DASHBOARD WIDGETS --- */
      .stat-card {
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
        border: none;
        transition: transform 0.2s;
        height: 100%;
      }
      .stat-card:hover {
        transform: translateY(-5px);
      }

      .stat-icon-box {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .bg-light-primary {
        background: #e3f2fd;
        color: #0d6efd;
      }
      .bg-light-success {
        background: #d1e7dd;
        color: #0f5132;
      }
      .bg-light-warning {
        background: #fff3cd;
        color: #856404;
      }
      .bg-light-danger {
        background: #f8d7da;
        color: #842029;
      }

      .chart-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.02);
        margin-bottom: 25px;
      }

      /* Responsive Sidebar Logic */
      @media (max-width: 992px) {
        .sidebar {
          margin-left: -250px;
        }
        .sidebar.active {
          margin-left: 0;
        }
        .main-content {
          margin-left: 0;
        }
        .menu-toggle {
          display: block;
        }
      }
    </style>
    <link rel="stylesheet" href="{% static 'Admin/css/admin_style.css' %}" />
  </head>
  <body>
    {% include "admin_sidebar.html"%} {% include "admin_header.html"%}

    <div class="main-content" id="mainContent">
      <div class="container-fluid p-4">
        <div class="row g-4 mb-4">
          <div class="col-md-6 col-lg-3">
            <div
              class="stat-card d-flex align-items-center justify-content-between"
            >
              <div>
                <p class="text-muted small mb-1">Total Revenue</p>
                <h3 class="fw-bold mb-0">$128K</h3>
                <small class="text-success"
                  ><i class="fas fa-arrow-up"></i> 12% vs last month</small
                >
              </div>
              <div class="stat-icon-box bg-light-success">
                <i class="fas fa-dollar-sign"></i>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <div
              class="stat-card d-flex align-items-center justify-content-between"
            >
              <div>
                <p class="text-muted small mb-1">Total Orders</p>
                <h3 class="fw-bold mb-0">1,400</h3>
                <small class="text-success"
                  ><i class="fas fa-arrow-up"></i> 5% vs last month</small
                >
              </div>
              <div class="stat-icon-box bg-light-primary">
                <i class="fas fa-shopping-bag"></i>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <div
              class="stat-card d-flex align-items-center justify-content-between"
            >
              <div>
                <p class="text-muted small mb-1">Pending Inquiries</p>
                <h3 class="fw-bold mb-0">23</h3>
                <small class="text-danger"
                  ><i class="fas fa-exclamation-circle"></i> Action
                  required</small
                >
              </div>
              <div class="stat-icon-box bg-light-danger">
                <i class="fas fa-envelope"></i>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-3">
            <div
              class="stat-card d-flex align-items-center justify-content-between"
            >
              <div>
                <p class="text-muted small mb-1">Total Customers</p>
                <h3 class="fw-bold mb-0">8,500</h3>
                <small class="text-muted">Total registered</small>
              </div>
              <div class="stat-icon-box bg-light-warning">
                <i class="fas fa-users"></i>
              </div>
            </div>
          </div>
        </div>

        <div class="row g-4 mb-4">
          <div class="col-lg-8">
            <div class="chart-card">
              <div
                class="d-flex justify-content-between align-items-center mb-3"
              >
                <h5 class="fw-bold">Revenue Analytics</h5>
                <select class="form-select form-select-sm w-auto">
                  <option>This Year</option>
                  <option>Last Year</option>
                </select>
              </div>
              <canvas id="revenueChart" height="120"></canvas>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="chart-card">
              <h5 class="fw-bold mb-3">Sales by Category</h5>
              <canvas id="categoryChart" height="200"></canvas>
            </div>
          </div>
        </div>

        <div class="chart-card">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-bold">Recent Orders</h5>
            <a href="admin-orders.html" class="btn btn-sm btn-primary"
              >View All</a
            >
          </div>
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Product</th>
                  <th>Amount</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>#ORD-001</td>
                  <td>John Doe</td>
                  <td>Samsung 55" 4K TV</td>
                  <td>$599.00</td>
                  <td><span class="badge bg-success">Shipped</span></td>
                </tr>
                <tr>
                  <td>#ORD-002</td>
                  <td>Jane Smith</td>
                  <td>Sony Soundbar</td>
                  <td>$250.00</td>
                  <td>
                    <span class="badge bg-warning text-dark">Pending</span>
                  </td>
                </tr>
                <tr>
                  <td>#ORD-003</td>
                  <td>Mike Ross</td>
                  <td>LG OLED C1</td>
                  <td>$1,299.00</td>
                  <td><span class="badge bg-danger">Cancelled</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // 1. Sidebar Toggle (Mobile)
      function toggleSidebar() {
        document.getElementById("sidebar").classList.toggle("active");
      }

      // 2. Dropdown Logic
      function toggleDropdown(menuId, btn) {
        var dropdown = document.getElementById(menuId);
        if (dropdown.style.display === "block") {
          dropdown.style.display = "none";
          btn.classList.remove("active");
        } else {
          dropdown.style.display = "block";
          btn.classList.add("active");
        }
      }

      // 3. CHART.JS CONFIGURATION

      // Line Chart (Revenue)
      const ctxRev = document.getElementById("revenueChart").getContext("2d");
      new Chart(ctxRev, {
        type: "line",
        data: {
          labels: [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ],
          datasets: [
            {
              label: "Revenue ($)",
              data: [
                12000, 19000, 3000, 5000, 2000, 30000, 45000, 25000, 32000,
                40000, 50000, 60000,
              ],
              borderColor: "#3498db",
              backgroundColor: "rgba(52, 152, 219, 0.1)",
              borderWidth: 2,
              fill: true,
              tension: 0.4,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: { y: { beginAtZero: true } },
        },
      });

      // Doughnut Chart (Categories)
      const ctxCat = document.getElementById("categoryChart").getContext("2d");
      new Chart(ctxCat, {
        type: "doughnut",
        data: {
          labels: ["Smart TVs", "OLEDs", "Audio", "Accessories"],
          datasets: [
            {
              data: [45, 25, 20, 10],
              backgroundColor: ["#2c3e50", "#3498db", "#e74c3c", "#f1c40f"],
              borderWidth: 0,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { position: "bottom" } },
        },
      });
    </script>
  </body>
</html>
